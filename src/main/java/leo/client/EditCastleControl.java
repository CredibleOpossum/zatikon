//////////////////////////////////////////////////////////////////////
// Name: EditCastleControl
// Desc: The board showing the contents of your castle
// Date: 7/02/2003 - Gabe Jones
// TODO:
///////////////////////////////////////////////////////////////////////
package leo.client;

// imports

import leo.shared.Constants;
import leo.shared.UndeployedUnit;

import java.util.Vector;


public class EditCastleControl extends EditCastleBoard {
    /////////////////////////////////////////////////////////////////
    // Constants
    /////////////////////////////////////////////////////////////////


    /////////////////////////////////////////////////////////////////
    // Properties
    /////////////////////////////////////////////////////////////////
    private int buttons = 0;


    /////////////////////////////////////////////////////////////////
    // Constructor
    /////////////////////////////////////////////////////////////////
    public EditCastleControl(EditCastlePanel panel, String newMessage, int x, int y, int width, int height) {
        super(panel, newMessage, x, y, width, height, Constants.IMG_EDIT_CASTLE_PANEL);
    }


    /////////////////////////////////////////////////////////////////
    // Initialize the control
    /////////////////////////////////////////////////////////////////
    public void initialize() {
        clear();

        Vector units = panel.getCastle().getBarracks();

        for (int i = 0; i < units.size(); i++) {
            UndeployedUnit unit = (UndeployedUnit) units.elementAt(i);

            add(new ArmyButton(unit, this, panel));

        }

    }


    /////////////////////////////////////////////////////////////////
    // Get button position
    /////////////////////////////////////////////////////////////////
    public int getButtonPosition() {
        return buttons * (ArmyButton.getButtonHeight() + MARGIN) + Client.FONT_HEIGHT + (MARGIN * 3);
    }


    /////////////////////////////////////////////////////////////////
    // Get button position
    /////////////////////////////////////////////////////////////////
    public void add(LeoComponent newLeoComponent) {
        super.add(newLeoComponent);
        buttons++;
    }


    /////////////////////////////////////////////////////////////////
    // Get the message
    /////////////////////////////////////////////////////////////////
    public String getMessage() {
        return super.getMessage() + "  (" + (Constants.MAX_ARMY_SIZE - panel.getCastle().getValue() + " points remaining)");
    }


    /////////////////////////////////////////////////////////////////
    // Clear
    /////////////////////////////////////////////////////////////////
    public void clear() {
        buttons = 0;
        super.clear();
    }
}
